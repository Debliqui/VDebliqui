import traduction from"../data/traduction.js";const defaultLang=document.documentElement.lang||"fr",switchBtnLang=document.querySelector("[data-switch-lang]"),localStorageLang=localStorage.getItem("language");function applyLanguage(e){traduction[e]?(document.documentElement.lang=e,switchBtnLang&&(switchBtnLang.value=e)):console.log(`La langue ${e} n'est pas disponible dans les traductions.`)}function updateContent(e){const t=traduction[e];if(!t)return;document.querySelector("[data-header-label]").setAttribute("aria-label",t.headerLablel),document.querySelector("[data-switch-lang-title]").textContent=t.selectTitle,document.querySelector("[data-theme-label]").setAttribute("aria-label",t.themeLabel),document.querySelector("[data-main-label]").setAttribute("aria-label",t.mainLabel);const a=t.section.banner;document.querySelector("[data-title]").textContent=a.title,document.querySelector("[data-job]").textContent=a.job,document.querySelector("[data-location]").textContent=a.location,document.querySelector("[data-statu]").textContent=a.statu;document.querySelectorAll("[data-contact-btn]").forEach((e=>e.textContent=a.subscribe));const n=t.section.about;document.querySelector("[data-about-section]").setAttribute("aria-label",n.sectionLabel);const o=document.querySelector("[data-about-title]");o.textContent=n.title,o.setAttribute("aria-label",n.title),document.querySelector("[data-about-catchphrase]").textContent=n.catchphrase,document.querySelector("[data-about-catchphrase-2]").textContent=n.catchphrase2;const c=document.querySelector("[data-about-specialties]");c&&(c.innerHTML="",c.setAttribute("aria-label",n.listLabel),n.listSpecialties.forEach((e=>{const t=document.createElement("li");t.textContent=e,c.appendChild(t)})));const l=t.section.project.listProject,r=document.querySelector("[data-projects]");document.querySelector("[data-projects-section]").setAttribute("aria-label",t.section.project.sectionLabel),document.querySelector("[data-project-title]").textContent=t.section.project.title;const i=document.querySelector("[data-projects-filter]");i.setAttribute("title",t.section.project.filtersTitle);new URLSearchParams(window.location.search).get("flt");i.innerHTML="";const d=document.createElement("button");d.setAttribute("data-category-id","all"),d.classList.add("section-container__projects__filter__btn","selected"),d.textContent=t.section.project.allCategory,i.appendChild(d);function s(){const e=new URLSearchParams(window.location.search).get("flt")||"all";document.querySelectorAll(".section-container__projects__filter__btn").forEach((t=>{t.classList.toggle("selected",t.dataset.categoryId===e)})),r.innerHTML="";("all"===e?l:l.filter((t=>t.categoryId===e))).forEach((e=>{const a=`\n        <div class="project-card" data-category-id="${e.categoryId}">\n            <article class="card" aria-label="${t.section.project.label.projectLabel} ${e.name}">\n              <div class="card__content" >\n                <h3 class="card__content__name">${e.name}</h3>\n                <p class="card__content__objectif" aria-label="${t.section.project.label.objectifLabel}"><span>${t.section.project.label.objectifLabel} : </span>${e.objectif}</p>\n                 <ul class="card__content__language" aria-label="${t.section.project.label.langTitle}">\n                    ${e.language.map((e=>`<li class="card__content__language__tag">${e}</li>`)).join("")}\n                </ul>\n              </div>\n              <button class="card__img-container" data-project-id="${e.id}" aria-label="${t.section.project.label.detailsLabel} ${e.name}">\n                <img\n                  src="${e.src}"\n                  alt=""\n                  class="card__img-container__picture"\n                  width="300" height="200"\n                  loading="lazy"\n                />\n                <div class="card__img-container__overlay">\n                  <p>${t.section.project.label.detailsBtnLabel}</p>\n                </div>\n              </button>\n            </article>\n          </a>\n          <a href="${e.linkGit}" target="_blank" class="github-link" aria-label="${t.section.project.label.linkGitLabel} ${e.name}">\n              <i class="fa-brands fa-github"></i>\n            </a>\n          </article>\n        </div>\n    `;r.innerHTML+=a}))}t.section.project.categories.forEach((e=>{const t=document.createElement("button");t.setAttribute("data-category-id",e.categoryId),t.classList.add("section-container__projects__filter__btn"),t.textContent=e.name,i.appendChild(t)})),document.querySelectorAll(".section-container__projects__filter__btn").forEach((e=>{e.addEventListener("click",(()=>{!function(e){const t=new URLSearchParams(location.search);"all"===e?t.delete("flt"):t.set("flt",e);const a=t.toString().length>0?`${location.pathname}?${t.toString()}`:location.pathname;history.replaceState(null,"",a)}(e.dataset.categoryId),s(),document.querySelectorAll(".section-container__projects__filter__btn").forEach((e=>e.classList.remove("selected"))),e.classList.add("selected")}))})),s(),window.addEventListener("popstate",(()=>{s()}));const u=document.querySelector("[data-project-dialog]");function b(){const e=document.querySelector("[data-link-demo]");e&&e.remove();document.querySelector("[data-gitHub-repo]").href="";const t=document.querySelector("[data-demo-img]");t&&t.remove()}u.setAttribute("aria-label",t.section.project.label.dialogLabel),document.querySelectorAll("[data-project-id]").forEach((e=>{e.addEventListener("click",(()=>{const a=e.getAttribute("data-project-id"),n=l.find((e=>e.id===a));if(n){document.querySelector("[data-project-dialog-title]").textContent=n.name;const e=document.querySelector("[data-conainer-video-demo]"),a=document.querySelector("[data-container-iframe-demo]");if(n.mobileDemo){e.style.display="none",a.style.display="flex";const t=document.querySelector("[data-iframe-demo]"),o=document.querySelector("[data-iframe-content]");o&&o.remove();const c=document.createElement("iframe");c.setAttribute("src",n.link),c.classList.add("desktop-template__iframe"),c.setAttribute("aria-label",n.name),c.title=n.name,c.setAttribute("data-iframe-content",""),t.appendChild(c)}else{const t=`\n          <video class="dialog-project__demo-video__src" controls muted playsinline src="${n.srcDemo}">\n            `;a.style.display="none",e.style.display="flex",e.innerHTML=t}document.querySelector("[data-project-dialog-subtitle]").textContent=n.subtitle,document.querySelector("[data-project-dialog-description]").innerHTML=n.description;const o=document.querySelector("[data-project-lang]");o.innerHTML=`\n        ${n.language.map((e=>`<li class="card__content__language__tag">${e}</li>`)).join("")}\n        `,o.setAttribute("aria-label",t.section.project.label.langTitle);const c=document.querySelector("[data-gitHub-repo]");if(c.href=n.linkGit,n.link){const e=document.createElement("a");e.textContent=t.section.project.label.linkDemoBtn,e.className="dialog-project__links__link",e.href=n.link,e.target="_blank",e.setAttribute("data-link-demo",""),c.insertAdjacentElement("afterend",e)}else{document.querySelector("[data-link-demo]")&&b()}u.showModal()}}))})),document.querySelectorAll("[data-close-btn]").forEach((e=>{e.addEventListener("click",(()=>{u.close(),b()}))})),u.addEventListener("click",(e=>{e.target===u&&(u.close(),b())})),document.querySelector("[data-degrees-section]").setAttribute("aria-label",t.section.degrees.sectionLabel);document.querySelector("[data-degrees-title]").textContent=t.section.degrees.title;document.querySelector("[data-degrees-catchphrase]").textContent=t.section.degrees.catchphrase;const m=document.querySelector("[data-degrees-card-grid]");document.querySelector("[data-degrees-card-grid-title]").textContent=t.section.degrees.gridLabel;const g=t.section.degrees.article;m.innerHTML="",g.forEach((e=>{const t=`\n     <article\n            class="section-container__degrees__grid__card"\n            aria-label="${e.cardLabel}"\n            data-degrees-card\n          >\n              <h4\n                class="section-container__degrees__grid__card__title"\n                data-degrees-card-title\n              >\n              ${e.icon} ${e.title}\n              </h4>\n              <p class="section-container__degrees__grid__card__type">Type : ${e.type}</p>\n              <p class="section-container__degrees__grid__card__skills">${e.skillsLabel}</p>\n            <ul\n              class="section-container__degrees__grid__card__list"\n              aria-label="${e.listLabel}"\n              data-degrees-card-list\n            >\n              ${e.list.map((e=>`<li><span aria-hidden="true">âœ” </span>${e}</li>`)).join("")}\n            </ul>\n          </article>\n  `;m.innerHTML+=t})),document.querySelector("[data-footer-label]").setAttribute("aria-label",t.footer.footerLabel),document.querySelectorAll("[data-list-link-title").forEach((e=>e.textContent=t.footer.listLabel)),document.querySelectorAll("[data-linkedin-label-span]").forEach((e=>e.textContent=t.footer.linkedinLabel)),document.querySelectorAll("[data-github-label]").forEach((e=>e.setAttribute("aria-label",t.footer.githubLabel))),document.querySelectorAll("[data-gitHub-label-span]").forEach((e=>e.textContent=t.footer.githubLabel)),document.querySelector("[data-dialog-label]").setAttribute("aria-label",t.contact.dialogLabel);document.querySelectorAll("[data-close-btn-label]").forEach((e=>{e.textContent=t.contact.closeLabel})),document.querySelector("[data-dialog-subtitle]").innerHTML=t.contact.subtitle;const _=document.querySelector("[data-dialog-description]");_.textContent=t.contact.description,_.setAttribute("aria-label",t.contact.descriptionLabel);const p=document.querySelector("[data-copy-btn-content]");p.setAttribute("aria-label",t.contact.copyBtn),p.textContent=t.contact.copyBtn,document.querySelector("[data-mail-btn]").textContent=t.contact.mailBtnLabel,document.querySelector("[data-copy-message]").setAttribute("aria-label",t.contact.copyMessageLabel),document.querySelector("[data-copy-message-content]").textContent=t.contact.copyMessage}document.addEventListener("DOMContentLoaded",(()=>{const e=localStorageLang||defaultLang;applyLanguage(e),updateContent(e)})),switchBtnLang?.addEventListener("change",(()=>{const e=switchBtnLang.value;localStorage.setItem("language",e),applyLanguage(e),updateContent(e)}));