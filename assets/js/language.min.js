import traduction from"../data/traduction.js";const defaultLang=document.documentElement.lang||"fr",switchBtnLang=document.querySelector("[data-switch-lang]"),localStorageLang=localStorage.getItem("language");function applyLanguage(e){traduction[e]?(document.documentElement.lang=e,switchBtnLang&&(switchBtnLang.value=e)):console.log(`La langue ${e} n'est pas disponible dans les traductions.`)}function updateContent(e){const t=traduction[e];if(!t)return;document.querySelector("[data-header-label]").setAttribute("aria-label",t.headerLablel);document.querySelector("[data-switch-lang]").title=t.selectTitle,document.querySelector("[data-theme-label]").setAttribute("aria-label",t.themeLabel),document.querySelector("[data-main-label]").setAttribute("aria-label",t.mainLabel);const a=t.section.banner;document.querySelector("[data-title]").textContent=a.title,document.querySelector("[data-job]").textContent=a.job,document.querySelector("[data-location]").textContent=a.location,document.querySelector("[data-statu]").textContent=a.statu;const n=document.querySelector("[data-contact-btn]");n.textContent=a.subscribe,n.setAttribute("aria-label",a.subscribeLabel),document.querySelector("[data-profil-picture]").setAttribute("alt",a.altPictureProfile);document.querySelector("[data-background-src]").setAttribute("alt",a.altPictureBackground);const c=t.section.about;document.querySelector("[data-about-section]").setAttribute("aria-label",c.sectionLabel);const o=document.querySelector("[data-about-title]");o.textContent=c.title,o.setAttribute("aria-label",c.title),document.querySelector("[data-about-catchphrase]").textContent=c.catchphrase;const l=document.querySelector("[data-about-specialties]");l&&(l.innerHTML="",l.setAttribute("aria-label",c.listLabel),c.listSpecialties.forEach((e=>{const t=document.createElement("li");t.textContent=e,l.appendChild(t)})));const r=t.section.project.listProject,i=document.querySelector("[data-projects]");document.querySelector("[data-projects-section]").setAttribute("aria-label",t.section.project.sectionLabel),document.querySelector("[data-project-title]").textContent=t.section.project.title;const d=document.querySelector("[data-projects-filter]");d.innerHTML="";const s=document.createElement("button");s.setAttribute("data-category-id","all"),s.classList.add("section-container__projects__filter__btn","selected"),s.textContent=t.section.project.allCategory,d.appendChild(s);t.section.project.categories.map((e=>{const t=document.createElement("button");t.setAttribute("data-category-id",e.categoryId),t.classList.add("section-container__projects__filter__btn"),t.textContent=e.name,d.appendChild(t)})),document.querySelectorAll(".section-container__projects__filter__btn").forEach((e=>{e.addEventListener("click",(()=>{const t=e.dataset.categoryId,a=document.querySelectorAll(".project-card");document.querySelectorAll(".section-container__projects__filter__btn").forEach((e=>e.classList.remove("selected"))),e.classList.add("selected"),a.forEach((e=>{e.dataset.categoryId===t||"all"===t?e.style.display="":(e.style.display="none",e.setAttribute("visibily","hidden"))}))}))})),i.innerHTML="",r.forEach((e=>{const a=`\n        <div class="project-card" data-category-id="${e.categoryId}">\n            <article class="card" aria-label="${t.section.project.label.projectLabel} ${e.name}">\n              <div class="card__content" >\n                <h3 class="card__content__name">${e.name}</h3>\n                <p class="card__content__objectif" aria-label="${t.section.project.label.objectifLabel}"><span aria-hidden="true">${t.section.project.label.objectifLabel} : </span>${e.objectif}</p>\n                 <ul class="card__content__language" aria-label="${t.section.project.label.langTitle}">\n                    ${e.language.map((e=>`<li class="card__content__language__tag">${e}</li>`)).join("")}\n                </ul>\n              </div>\n              <button class="card__img-container" data-project-id="${e.id}" aria-label="${t.section.project.label.detailsLabel} ${e.name}">\n                <img\n                  src="${e.src}"\n                  alt="Demo ${e.name}"\n                  class="card__img-container__picture"\n                  width="300" height="200"\n                  loading="lazy"\n                />\n                <div class="card__img-container__overlay">\n                  <p>${t.section.project.label.detailsBtnLabel}</p>\n                </div>\n              </button>\n            </article>\n          </a>\n          <a href="${e.linkGit}" target="_blank" class="github-link" aria-label="${t.section.project.label.linkGitLabel} ${e.name}">\n              <i class="fa-brands fa-github"></i>\n            </a>\n          </article>\n        </div>\n    `;i.innerHTML+=a}));const u=document.querySelector("[data-project-dialog]");function b(){const e=document.querySelector("[data-link-demo]");e&&e.remove();document.querySelector("[data-gitHub-repo]").href="";const t=document.querySelector("[data-demo-img]");t&&t.remove()}u.setAttribute("aria-label",t.section.project.label.dialogLabel),document.querySelectorAll("[data-project-id]").forEach((e=>{e.addEventListener("click",(()=>{const a=e.getAttribute("data-project-id"),n=r.find((e=>e.id===a));if(n){document.querySelector("[data-project-dialog-title]").textContent=n.name;const e=document.querySelector("[data-conainer-video-demo]"),a=document.querySelector("[data-container-iframe-demo]");if(n.mobileDemo){e.style.display="none",a.style.display="flex";const t=document.querySelector("[data-iframe-demo]"),c=document.querySelector("[data-iframe-content]");c&&c.remove();const o=document.createElement("iframe");o.setAttribute("src",n.link),o.classList.add("desktop-template__iframe"),o.setAttribute("aria-label",n.name),o.title=n.name,o.setAttribute("data-iframe-content",""),t.appendChild(o)}else{const t=`\n          <video class="dialog-project__demo-video__src" controls muted playsinline src="${n.srcDemo}">\n            `;a.style.display="none",e.style.display="flex",e.innerHTML=t}document.querySelector("[data-project-dialog-subtitle]").textContent=n.subtitle,document.querySelector("[data-project-dialog-description]").innerHTML=n.description;const c=document.querySelector("[data-project-lang]");c.innerHTML=`\n        ${n.language.map((e=>`<li class="card__content__language__tag">${e}</li>`)).join("")}\n        `,c.setAttribute("aria-label",t.section.project.label.langTitle);const o=document.querySelector("[data-gitHub-repo]");if(o.href=n.linkGit,n.link){const e=document.createElement("a");e.textContent=t.section.project.label.linkDemoBtn,e.className="dialog-project__links__link",e.href=n.link,e.target="_blank",e.setAttribute("data-link-demo",""),o.insertAdjacentElement("afterend",e)}else{document.querySelector("[data-link-demo]")&&b()}u.showModal()}}))})),document.querySelectorAll("[data-close-btn]").forEach((e=>{e.addEventListener("click",(()=>{u.close(),b()}))})),u.addEventListener("click",(e=>{e.target===u&&(u.close(),b())})),document.querySelector("[data-degrees-section]").setAttribute("aria-label",t.section.degrees.sectionLabel);document.querySelector("[data-degrees-title]").textContent=t.section.degrees.title;document.querySelector("[data-degrees-catchphrase]").textContent=t.section.degrees.catchphrase;const m=document.querySelector("[data-degrees-card-grid]");document.querySelector("[data-degrees-card-grid-title]").textContent=t.section.degrees.gridLabel;const g=t.section.degrees.article;m.innerHTML="",g.forEach((e=>{const t=`\n     <article\n            class="section-container__degrees__grid__card"\n            aria-label="${e.cardLabel}"\n            data-degrees-card\n          >\n              <h4\n                class="section-container__degrees__grid__card__title"\n                data-degrees-card-title\n              >\n              ${e.icon} ${e.title}\n              </h4>\n              <p class="section-container__degrees__grid__card__type">Type : ${e.type}</p>\n              <p class="section-container__degrees__grid__card__skills">${e.skillsLabel}</p>\n            <ul\n              class="section-container__degrees__grid__card__list"\n              aria-label="${e.listLabel}"\n              data-degrees-card-list\n            >\n              ${e.list.map((e=>`<li><span aria-hidden="true">âœ” </span>${e}</li>`)).join("")}\n            </ul>\n          </article>\n  `;m.innerHTML+=t})),document.querySelector("[data-footer-label]").setAttribute("aria-label",t.footer.footerLabel),document.querySelectorAll("[data-list-link]").forEach((e=>e.setAttribute("aria-label",t.footer.listLabel))),document.querySelectorAll("[data-linkedin-label]").forEach((e=>e.setAttribute("aria-label",t.footer.linkedinLabel))),document.querySelectorAll("[data-linkedin-label-span]").forEach((e=>e.textContent=t.footer.linkedinLabel)),document.querySelectorAll("[data-github-label]").forEach((e=>e.setAttribute("aria-label",t.footer.githubLabel))),document.querySelectorAll("[data-gitHub-label-span]").forEach((e=>e.textContent=t.footer.githubLabel)),document.querySelector("[data-dialog-label]").setAttribute("aria-label",t.contact.dialogLabel);document.querySelectorAll("[data-close-btn]").forEach((e=>{e.setAttribute("aria-label",t.contact.closeLabel)})),document.querySelector("[data-dialog-subtitle]").innerHTML=t.contact.subtitle;const p=document.querySelector("[data-dialog-description]");p.textContent=t.contact.description,p.setAttribute("aria-label",t.contact.descriptionLabel),document.querySelector("[data-copy-btn]").setAttribute("aria-label",t.contact.copyBtnLabel);const _=document.querySelector("[data-copy-btn-content]");_.setAttribute("aria-label",t.contact.copyBtn),_.textContent=t.contact.copyBtn,document.querySelector("[data-mail-btn]").setAttribute("aria-label",t.contact.mailBtnLabel),document.querySelector("[data-copy-message]").setAttribute("aria-label",t.contact.copyMessageLabel),document.querySelector("[data-copy-message-content]").textContent=t.contact.copyMessage}document.addEventListener("DOMContentLoaded",(()=>{const e=localStorageLang||defaultLang;applyLanguage(e),updateContent(e)})),switchBtnLang?.addEventListener("change",(()=>{const e=switchBtnLang.value;localStorage.setItem("language",e),applyLanguage(e),updateContent(e)}));