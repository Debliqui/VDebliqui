import traduction from"../data/traduction.js";const defaultLang=document.documentElement.lang||"fr",switchBtnLang=document.querySelector("[data-switch-lang]"),localStorageLang=localStorage.getItem("language");function applyLanguage(t){traduction[t]?(document.documentElement.lang=t,switchBtnLang&&(switchBtnLang.value=t)):console.log(`La langue ${t} n'est pas disponible dans les traductions.`)}function updateContent(t){const e=traduction[t];if(!e)return;document.querySelector("[data-header-label]").setAttribute("aria-label",e.headerLablel);document.querySelector("[data-switch-lang]").title=e.selectTitle,document.querySelector("[data-theme-label]").setAttribute("aria-label",e.themeLabel),document.querySelector("[data-main-label]").setAttribute("aria-label",e.mainLabel);const a=e.section.banner;document.querySelector("[data-title]").textContent=a.title,document.querySelector("[data-job]").textContent=a.job,document.querySelector("[data-location]").textContent=a.location,document.querySelector("[data-statu]").textContent=a.statu;const n=document.querySelector("[data-contact-btn]");n.textContent=a.subscribe,n.setAttribute("aria-label",a.subscribeLabel),document.querySelector("[data-profil-picture]").setAttribute("alt",a.altPictureProfile);document.querySelector("[data-background-src]").setAttribute("alt",a.altPictureBackground);const l=e.section.about;document.querySelector("[data-about-section]").setAttribute("aria-label",l.sectionLabel);const c=document.querySelector("[data-about-title]");c.textContent=l.title,c.setAttribute("aria-label",l.title),document.querySelector("[data-about-catchphrase]").textContent=l.catchphrase;const o=document.querySelector("[data-about-specialties]");o&&(o.innerHTML="",o.setAttribute("aria-label",l.listLabel),l.listSpecialties.forEach((t=>{const e=document.createElement("li");e.textContent=t,o.appendChild(e)})));const r=e.section.project.listProject,i=document.querySelector("[data-projects]");document.querySelector("[data-projects-section]").setAttribute("aria-label",e.section.project.sectionLabel),document.querySelector("[data-project-title]").textContent=e.section.project.title;const s=document.querySelector("[data-projects-filter]");s.innerHTML="";const d=document.createElement("button");d.setAttribute("data-category-id","all"),d.classList.add("section-container__projects__filter__btn","selected"),d.textContent=e.section.project.allCategory,s.appendChild(d);e.section.project.categories.map((t=>{const e=document.createElement("button");e.setAttribute("data-category-id",t.categoryId),e.classList.add("section-container__projects__filter__btn"),e.textContent=t.name,s.appendChild(e)})),document.querySelectorAll(".section-container__projects__filter__btn").forEach((t=>{t.addEventListener("click",(()=>{const e=t.dataset.categoryId,a=document.querySelectorAll(".project-card");document.querySelectorAll(".section-container__projects__filter__btn").forEach((t=>t.classList.remove("selected"))),t.classList.add("selected"),a.forEach((t=>{t.dataset.categoryId===e||"all"===e?t.style.display="":(t.style.display="none",t.setAttribute("visibily","hidden"))}))}))})),i.innerHTML="",r.forEach((t=>{const a=`\n        <div class="project-card" data-category-id="${t.categoryId}">\n            <article class="card" aria-label="${e.section.project.label.projectLabel} ${t.name}">\n              <div class="card__content" >\n                <h3 class="card__content__name">${t.name}</h3>\n                <p class="card__content__objectif" aria-label="${e.section.project.label.objectifLabel}"><span aria-hidden="true">${e.section.project.label.objectifLabel} : </span>${t.objectif}</p>\n                 <ul class="card__content__language" aria-label="${e.section.project.label.langTitle}">\n                    ${t.language.map((t=>`<li class="card__content__language__tag">${t}</li>`)).join("")}\n                </ul>\n              </div>\n              <button class="card__img-container" data-project-id="${t.id}" aria-label="${e.section.project.label.detailsLabel} ${t.name}">\n                <img\n                  src="${t.src}"\n                  alt="Demo ${t.name}"\n                  class="card__img-container__picture"\n                  width="300" height="200"\n                  loading="lazy"\n                />\n                <div class="card__img-container__overlay">\n                  <p>${e.section.project.label.detailsBtnLabel}</p>\n                </div>\n              </button>\n            </article>\n          </a>\n          <a href="${t.linkGit}" target="_blank" class="github-link" aria-label="${e.section.project.label.linkGitLabel} ${t.name}">\n              <i class="fa-brands fa-github"></i>\n            </a>\n          </article>\n        </div>\n    `;i.innerHTML+=a}));const u=document.querySelector("[data-project-dialog]");function b(){const t=document.querySelector("[data-link-demo]");t&&t.remove();document.querySelector("[data-gitHub-repo]").href="";const e=document.querySelector("[data-demo-img]");e&&e.remove()}u.setAttribute("aria-label",e.section.project.label.dialogLabel),document.querySelectorAll("[data-project-id]").forEach((t=>{t.addEventListener("click",(()=>{const a=t.getAttribute("data-project-id"),n=r.find((t=>t.id===a));if(n){document.querySelector("[data-project-dialog-title]").textContent=n.name;const t=document.querySelector("[data-conainer-video-demo]"),a=document.querySelector("[data-container-iframe-demo]");if(n.mobileDemo){t.style.display="none",a.style.display="flex";const e=document.querySelector("[data-iframe-demo]"),l=document.querySelector("[data-iframe-content]");l&&l.remove();const c=document.createElement("iframe");c.setAttribute("src",n.link),c.classList.add("desktop-template__iframe"),c.setAttribute("aria-label",n.name),c.title=n.name,c.setAttribute("data-iframe-content",""),e.appendChild(c)}else{const e=`\n          <video class="dialog-project__demo-video__src" controls muted playsinline src="${n.srcDemo}">\n            `;a.style.display="none",t.style.display="flex",t.innerHTML=e}document.querySelector("[data-project-dialog-subtitle]").textContent=n.subtitle,document.querySelector("[data-project-dialog-description]").innerHTML=n.description;const l=document.querySelector("[data-project-lang]");l.innerHTML=`\n        ${n.language.map((t=>`<li class="card__content__language__tag">${t}</li>`)).join("")}\n        `,l.setAttribute("aria-label",e.section.project.label.langTitle);const c=document.querySelector("[data-gitHub-repo]");if(c.href=n.linkGit,n.link){const t=document.createElement("a");t.textContent=e.section.project.label.linkDemoBtn,t.className="dialog-project__links__link",t.href=n.link,t.target="_blank",t.setAttribute("data-link-demo",""),c.insertAdjacentElement("afterend",t)}else{document.querySelector("[data-link-demo]")&&b()}u.showModal()}}))})),document.querySelectorAll("[data-close-btn]").forEach((t=>{t.addEventListener("click",(()=>{u.close(),b()}))})),u.addEventListener("click",(t=>{t.target===u&&(u.close(),b())})),document.querySelector("[data-skills-section]").setAttribute("aria-label",e.section.skills.sectionLabel);const m=document.querySelector("[data-skills-title]");m.textContent=e.section.skills.title,m.setAttribute("aria-label",e.section.skills.sectionLabel);const p=document.querySelector("[data-skills-catchphrase]");p.textContent=e.section.skills.catchphrase,p.setAttribute("aria-label",e.section.skills.catchphraseLabel);const _=document.querySelector("[data-skills-card-grid]");_.setAttribute("aria-label",e.section.skills.gridLabel);const g=e.section.skills.article;_.innerHTML="",g.forEach((t=>{const e=`\n     <article\n            class="section-container__skills__grid__card"\n            aria-label="${t.cardLabel}"\n            data-skills-card\n          >\n            <header class="section-container__skills__grid__card__header">\n              ${t.icon}\n              <h3\n                class="section-container__skills__grid__card__title"\n                data-skills-card-title\n              >\n                ${t.title}\n              </h3>\n            </header>\n            <ul\n              class="section-container__skills__grid__card__list"\n              aria-label="${t.listLabel}"\n              data-skills-card-list\n            >\n              ${t.list.map((t=>`<li><span aria-hidden="true">âœ” </span>${t}</li>`)).join("")}\n            </ul>\n          </article>\n  `;_.innerHTML+=e})),document.querySelector("[data-footer-label]").setAttribute("aria-label",e.footer.footerLabel),document.querySelectorAll("[data-list-link]").forEach((t=>t.setAttribute("aria-label",e.footer.listLabel))),document.querySelectorAll("[data-linkedin-label]").forEach((t=>t.setAttribute("aria-label",e.footer.linkedinLabel))),document.querySelectorAll("[data-linkedin-label-span]").forEach((t=>t.textContent=e.footer.linkedinLabel)),document.querySelectorAll("[data-github-label]").forEach((t=>t.setAttribute("aria-label",e.footer.githubLabel))),document.querySelectorAll("[data-gitHub-label-span]").forEach((t=>t.textContent=e.footer.githubLabel)),document.querySelector("[data-dialog-label]").setAttribute("aria-label",e.contact.dialogLabel);document.querySelectorAll("[data-close-btn]").forEach((t=>{t.setAttribute("aria-label",e.contact.closeLabel)})),document.querySelector("[data-dialog-subtitle]").innerHTML=e.contact.subtitle;const y=document.querySelector("[data-dialog-description]");y.textContent=e.contact.description,y.setAttribute("aria-label",e.contact.descriptionLabel),document.querySelector("[data-copy-btn]").setAttribute("aria-label",e.contact.copyBtnLabel);const L=document.querySelector("[data-copy-btn-content]");L.setAttribute("aria-label",e.contact.copyBtn),L.textContent=e.contact.copyBtn,document.querySelector("[data-mail-btn]").setAttribute("aria-label",e.contact.mailBtnLabel),document.querySelector("[data-copy-message]").setAttribute("aria-label",e.contact.copyMessageLabel),document.querySelector("[data-copy-message-content]").textContent=e.contact.copyMessage}document.addEventListener("DOMContentLoaded",(()=>{const t=localStorageLang||defaultLang;applyLanguage(t),updateContent(t)})),switchBtnLang?.addEventListener("change",(()=>{const t=switchBtnLang.value;localStorage.setItem("language",t),applyLanguage(t),updateContent(t)}));